<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="description" content="Connection details &amp; server status.">
    <meta name="msapplication-TileColor" content="#5dde95">
    <meta name="theme-color" content="#5dde95">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:description" content="Connection details &amp; server status.">
    <meta property="og:image" content="https://kovuthehusky.com/og.png">
    <meta property="og:site_name" content="KovuTheHusky">
    <meta property="og:title" content="Counter-Strike">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kovuthehusky.com/counter-strike">
    <title>Counter-Strike - KovuTheHusky</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" href="/favicon.svg" sizes="any" type="image/svg+xml">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="stylesheet" href="/assets/main.css">
    <link rel="stylesheet" href="/node_modules/@fancyapps/fancybox/dist/jquery.fancybox.min.css" media="none" onload="if (media != 'all') { media='all'; }">
    <link type="application/atom+xml" rel="alternate" href="/feed.xml" title="KovuTheHusky" />
    <script src="/node_modules/jquery/dist/jquery.min.js"></script>
    <script src="/node_modules/@popperjs/core/dist/umd/popper.min.js" defer></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js" defer></script>
    <script src="/node_modules/@fancyapps/fancybox/dist/jquery.fancybox.min.js" defer></script>
    <script src="/node_modules/masonry-layout/dist/masonry.pkgd.min.js" defer></script>
    <script src="/node_modules/twemoji/dist/twemoji.min.js" defer></script>

    <script>$(document).ready(function () { document.body = twemoji.parse(document.body, {folder: 'svg', ext: '.svg'}); });</script>

  </head>
  <body>
    <nav class="navbar navbar-dark bg-transparent">
      <div class="container-fluid">
      <a class="navbar-brand" href="/">
        <img src="/images/avatar.svg" alt="KovuTheHusky" class="rounded-circle">
      </a>
      <div class="dropdown">
        <button class="navbar-toggler bg-dark" type="button" data-bs-toggle="dropdown" aria-label="Navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="dropdown-menu dropdown-menu-dark dropdown-menu-end">
          <a class="dropdown-item" href="/">About</a>
          <a class="dropdown-item" href="/places">Places</a>
          <a class="dropdown-item" href="/posts">Posts</a>
          <a class="dropdown-item" href="/projects">Projects</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Furry</h6>
          <a class="dropdown-item" href="/fursona">Fursona</a>
          <a class="dropdown-item" href="/fursuit">Fursuit</a>
          <a class="dropdown-item" href="/conventions">Conventions</a>
          <a class="dropdown-item" href="/parties">Parties</a>
          <div class="dropdown-divider"></div>
          <h6 class="dropdown-header">Gamer</h6>
          <a class="dropdown-item" href="/minecraft">Minecraft</a>
          <a class="dropdown-item" href="/terraria">Terraria</a>
          <a class="dropdown-item active" href="/counter-strike">Counter-Strike</a>
          <a class="dropdown-item" href="/pokemon-go">Pok√©mon GO</a>
        </div>
      </div>
    </div>
    </nav>

<div class="text-center gmb">
  <h1>Counter-Strike</h1>
  <p class="mb-0">Connection details &amp; server status.</p>
</div>
<div class="page gpb">
<div class="container">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">
        10man
        <span id="status" class="badge bg-danger">Offline</span>
      </h5>
      <p class="card-text align-middle">A server that runs get5 for playing 10man scrimmage matches.</p>
    </div>
    <div class="row">
      <div class="col-sm-6 col-left">
        <ul id="live" class="list-group list-group-flush">
          <li class="list-group-item d-flex justify-content-between">Version<span id="version">Offline</span></li>
          <li class="list-group-item d-flex justify-content-between" style="border-bottom: 0;">Map<span id="map">Offline</span></li>
          <li id="map-image-container" class="list-group-item" style="border-top: 0; padding-top: 0; display: none;">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" alt="" id="map-image" class="rounded" style="width: 100%;" />
          </li>
        </ul>
      </div>
      <div class="col-sm-6 col-right">
        <ul id="live-playerlist" class="list-group list-group-flush">
          <li id="playercount" class="list-group-item d-flex justify-content-between">Players<span id="players">Offline</span></li>
        </ul>
      </div>
    </div>
    <div class="card-body" style="border-top: 1px solid #808080;">
      <a href="steam://connect/40.75.7.193:27015/derp" class="btn btn-primary disabled remote">Connect</a>
      <a href="https://discord.gg/6s92ew7gsy" class="btn btn-secondary">Discord</a>
    </div>
  </div>
</div>

<script>
  $(document).ready(function() {
    $.ajaxSetup({ cache: false });
  });
</script>

<script>

  var players = [];
  
  function refresh() {
    $.getJSON('https://status.kovuthehusky.com/counter-strike.json', function(data) {
      $('#status').text('Online');
      $('.remote').removeClass('disabled');
      $('#status').addClass('bg-success');
      $('#status').removeClass('bg-danger');
      $('#version').text(data['Info']['Version']);
      if (data['Info']['Map'].startsWith('workshop/')) {
        $('#map').text(data['Info']['Map'].substring(data['Info']['Map'].lastIndexOf('/') + 1));
      } else {
        $('#map').text(data['Info']['Map']);
      }
      $('#map-image').attr('src', data['Info']['MapImage']);
      $('#map-image').attr('alt', data['Info']['Map']);
      $('#map-image-container').show();
      $('#players').text(data['Info']['Players'] + ' / ' + data['Info']['MaxPlayers']);
      var playernames = [];
      $.each(data.Players, function (key, value) {
        playernames.push(key);
      });
      var join = $(playernames).not(players).get();
      var part = $(players).not(playernames).get();
      $.each(join, function(key, value) {
        $('#live-playerlist').append('<a href="' + data['Players'][value]['url'] + '" class="list-group-item d-flex align-items-center justify-content-end player player-' + value + '"><img src="' + data['Players'][value]['avatar'] + '" class="rounded me-1" style="width: 24px; height: 24px;">' + data['Players'][value]['name'] + '</a>');
      });
      $.each(part, function(key, value) {
        $('.player-' + value).remove();
      });
      if (data['Info']['Players'] > 0) {
        $('#playercount').css('border-bottom', 'none');
      } else {
        $('#playercount').css('border-bottom', '1px solid rgba(0,0,0,.125)');
      }
      players = playernames;
    }).fail(function() {
      $('#status').text('Offline');
      $('.remote').addClass('disabled');
      $('#status').addClass('bg-danger');
      $('#status').removeClass('bg-success');
      $('#version').text('Offline');
      $('#map').text('Offline');
      $('#map-image-container').hide();
      $('#map-image').attr('alt', '');
      $('#players').text('Offline');
      $('.player-').remove();
    });
  }
  
  refresh();
  setInterval(refresh, 1000);
  
  </script>

</div>

  </body>
</html>
